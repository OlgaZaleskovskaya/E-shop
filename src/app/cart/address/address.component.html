<div class="main">

  <h3> Shipping address </h3>
  <form (ngSubmit)="onSubmit(addressForm)" #addressForm="ngForm" novalidate="">

    <div class="form-group">
      <input type="text" placeholder="Address 1" id="address1" required minlength="4" [(ngModel)]="address.address1"
        name="address1" #address1="ngModel">
      <div *ngIf="address1.invalid && (address1.dirty || address1.touched)" class="alert alert-danger">
        <div *ngIf="address1.errors.required">
          Address is required.
        </div>
        <div *ngIf="address1.errors.minlength">
          Name must be at least 4 characters long.
        </div>
      </div>
    </div>

    <div class="form-group">
      <input type="text" placeholder="Address 2" class="form-control" id="address2" [(ngModel)]="address.address2"
        name="address2" #address2="ngModel">
    </div>
    <div class="city">
      <div class="form-group">
        <input type="text" required placeholder="City" class="form-control" id="city" [(ngModel)]="address.city"
          name="city" #city="ngModel">
        <div *ngIf="city.invalid && (city.dirty || city.touched)" class="alert alert-danger">
          <div *ngIf="city.errors.required">
            City is required.
          </div>
        </div>
      </div>

      <div class="form-group">
        <input type="text" class="form-control" placeholder="Region" id="region" [(ngModel)]="address.region"
          name="region" #region="ngModel">
      </div>
      <div class="form-group">
        <input type="text" class="form-control" minlength="6" placeholder="Post Index" required id="index"
          [(ngModel)]="address.index" name="index" #index="ngModel">
        <div *ngIf="index.invalid && (index.dirty ||index.touched)" class="alert alert-danger">
          <div *ngIf="index.errors.required">
            Post Index is required.
          </div>
          <div *ngIf="index.errors.minlength">
            Post Index be at least 6 characters long.
          </div>
        </div>
      </div>
    </div>
    <div class="city">
      <div class="form-group">
        <p>Country</p>
        <select class="form-control" id="selectedCountry" required name="selectedCountry" [(ngModel)]="address.country"
          #selectedCountry="ngModel" (change)="onChange($event.target.value)">
          <option *ngFor="let item of countries; let ind = index" [value]="ind">{{item["country"]}}</option>
        </select>
        <!-- <div *ngIf="country.invalid && (country.dirty ||country.touched)" class="alert alert-danger">
          <div *ngIf="country.errors.required">
            Country is required.
          </div>

        </div> -->

      </div> 
      <div class="form-group">
        <p>Shipping region</p>
        <select class="form-control" id="shippingRegion" required name="shippingRegion" #shippingRegion = "ngModel" 
        [(ngModel)] = "address.shippingRegion">
          <option *ngFor="let region of shippingRegions; let ind = index" [value]="ind">{{region}}
          </option>
        </select>
        <div *ngIf="shippingRegion.invalid && (shippingRegion.dirty ||shippingRegion.touched)" class="alert alert-danger">
          <div *ngIf="shippingRegion.errors.required">
            Country is required.
          </div>

        </div>
      </div>
      <div class="form-group">
        <p>Shipping options</p>
        <select class="form-control" id="shippingOption" required [(ngModel)]="address.shippingOption" name="shippingOption" #shippingOption = "ngModel">
          <option *ngFor="let option of shippingOptions" [value]="option">{{option}}</option>
        </select>
      </div>

    </div>
    <button type="button" (click)="onCleanForm(addressForm)">Clean Form</button>
    <button type="submit" 
    
      [disabled]="address1.invalid || city.invalid || index.invalid || selectedCountry.invalid || shippingRegion.invalid || shippingOption.invalid">Place order</button>
 
    </form>

</div>